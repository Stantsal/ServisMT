// Translations data
const translations = {
    en: {
        nav: {
            home: "Home",
            products: "Products",
            services: "Services",
            about: "About",
            contact: "Contact",
            menu: "Navigation"
        },
        hero: {
            title: "Welcome to ServisMT",
            subtitle: "Leading supplier of laser cutting equipment, spare parts and services in Georgia",
            cta: "Learn More"
        },
        about: {
            title: "About ServisMT",
            subtitle: "ServisMT is a leading supplier of spare parts and consumables for laser cutting, welding, and engraving machines in Georgia. We supply CO2 and fiber laser machines, engraving and marking lasers, as well as air filtration systems for all types of welding and laser cutting. We have a wide range of consumables at reasonable prices, with a large inventory in stock."
        },
        products: {
            title: "Our Products"
        },
        card1: {
            title: "Laser Cutting Machines",
            subtitle: "Professional laser cutting equipment for various industries",
        subcard1: {
            title: "CO2 Laser Machines",
            subtitle: "High-power CO2 laser systems for thick material cutting",
        },
         subcard2: {
            title:"Fiber Laser Machines",
            subtitle:"Precision fiber laser systems for metal processing",
        },
         subcard3: {
            title: "Engraving Machines",
            subtitle: "Specialized equipment for detailed engraving work",
        },
          subcard4: {
            title: "Marking Machines",
            subtitle: "Industrial marking and coding solutions",
        },
        },
         card2: {
            title:"Spare Parts & Components",
            subtitle:"Original and compatible parts for laser equipment",
        subcard1: {
            title: "Laser Heads",
            subtitle: "Cutting heads and focusing systems",
        },
         subcard2: {
            title:"Mirror Mounts",
            subtitle:"Optical components and mirror assemblies",
        },
         subcard3: {
            title: "Mechanical Parts",
            subtitle: "Motors, drives, and motion components",
        },
          subcard4: {
            title: "Consumables",
            subtitle: "Nozzles, lenses, and replacement parts",
        },
        },
         card3: {
            title: "Ventilation Equipment",
            subtitle: "Air quality solutions for industrial environments",
        
        subcard1: {
            title: "Air Filtration Systems",
            subtitle: "Advanced filtration for clean air",
        },
         subcard2: {
            title:"Dust Collection Systems",
            subtitle:"Efficient dust and particle removal",
        },
         subcard3: {
            title: "Fume Extraction Units",
            subtitle: "Fume removal for welding and cutting",
        },
          subcard4: {
            title: "Industrial Fans",
            subtitle: "Heavy-duty ventilation fans",
        },
    },

        services: {
            title: "Our Services"
        },
        servicesCard1: {
            title:"Equipment Diagnostics",
            subtitle:"Diagnosis of coordinate and optical systems for laser cutting and engraving machines",
        },
        servicesCard2: {
            title:"Service Maintenance",
            subtitle:"Service maintenance of coordinate and optical systems for laser cutting and engraving machines",
        },
        servicesCard3: {
            title:"Equipment Repair",
            subtitle:"Repair of coordinate and optical systems for laser cutting and engraving machines",
        },
        contact: {
            title: "Contact Us",
            subtitle: "Leading supplier of laser cutting equipment, spare parts and services in Georgia",
            form: {
                name: "Name",
                email: "Email",
                phone: "Phone",
                message: "Message",
                submit: "Send Message"
            }
        }
    },
    ru: {
        nav: {
            home: "Главная",
            products: "Продукция",
            services: "Услуги",
            about: "О нас",
            contact: "Контакты",
            menu: "Навигация"
        },
        hero: {
            title: "Добро пожаловать в ServisMT",
            subtitle: "Ведущий поставщик оборудования для лазерной резки, запчастей и услуг в Грузии",
            cta: "Узнать больше"
        },
        about: {
            title: "О компании ServisMT",
            subtitle: "ServisMT является ведущим поставщиком запасных частей и расходных материалов для станков лазерной резки, сварки и гравировки в Грузии. Мы поставляем станки CO2 и волоконные лазеры, лазеры для гравировки и маркировки, а также системы фильтрации воздуха для всех видов сварки и лазерной резки. У нас широкий ассортимент расходных материалов по приемлемым ценам, с большими складскими запасами."
        },
        products: {
            title: "Наша продукция"
        },
        card1: {
            title: "Станки лазерной резки",
            subtitle: "Профессиональное оборудование для лазерной резки для различных отраслей промышленности",
        subcard1: {
            title: "Лазерные станки CO2",
            subtitle: "Высокомощные лазерные системы CO2 для резки толстых материалов",
        },
         subcard2: {
            title:"Волоконные лазерные станки",
            subtitle:"Прецизионные волоконные лазерные системы для обработки металлов",
        },
         subcard3: {
            title: "Станки для гравировки",
            subtitle: "Специализированное оборудование для детальных гравировальных работ",
        },
          subcard4: {
            title: "Станки для маркировки",
            subtitle: "Промышленные решения для маркировки и кодирования",
        },
        },
         card2: {
            title:"Запасные части",
            subtitle:"Оригинальные и совместимые запчасти для лазерного оборудования",
        subcard1: {
            title: "Лазерные головки",
            subtitle: "Режущие головки и системы фокусировки",
        },
         subcard2: {
            title:"Крепления для зеркал",
            subtitle:"Оптические компоненты и узлы зеркал",
        },
         subcard3: {
            title: "Механические части",
            subtitle: "Двигатели, приводы и компоненты движения",
        },
          subcard4: {
            title: "Расходные материалы",
            subtitle: "Сопла, линзы и запасные части",
        },
        },
         card3: {
            title: "Вентиляционное оборудование",
            subtitle: "Решения для качества воздуха в промышленных условиях",
        subcard1: {
            title: "Системы фильтрации воздуха",
            subtitle: "Современная фильтрация для чистого воздуха",
        },
         subcard2: {
            title:"Системы пылеулавливания",
            subtitle:"Эффективное удаление пыли и частиц",
        },
         subcard3: {
            title: "Вытяжные установки",
            subtitle: "Удаление дыма при сварке и резке",
        },
          subcard4: {
            title: "Промышленные вентиляторы",
            subtitle: "Промышленные вентиляторы для тяжелых условий эксплуатации",
        },
        },
        services: {
            title: "Наши услуги"
        },
          servicesCard1: {
            title:"Диагностика оборудования",
            subtitle:"Диагностика координатных и оптических систем станков для лазерной резки и гравировки",
        },
        servicesCard2: {
            title:"Сервисное обслуживание",
            subtitle:"Сервисное обслуживание координатных и оптических систем станков для лазерной резки и гравировки",
        },
        servicesCard3: {
            title:"Ремонт оборудования",
            subtitle:"Ремонт координатных и оптических систем станков для лазерной резки и гравировки",
        },
        contact: {
            title: "Связаться с нами",
            subtitle: "Ведущий поставщик оборудования для лазерной резки, запасных частей и услуг в Грузии",
            form: {
                name: "Имя",
                email: "Email",
                phone: "Телефон",
                message: "Сообщение",
                submit: "Отправить"
            }
        }
    },
    ge: {
        nav: {
            home: "მთავარი",
            products: "პროდუქცია",
            services: "სერვისები",
            about: "ჩვენ შესახებ",
            contact: "კონტაქტი",
            menu: "ნავიგაცია",
        },
        hero: {
            title: "მოგესალმებით ServisMT-ში",
            subtitle: "ლაზერული ჭრის აღჭურვილობის, სათადარიგო ნაწილებისა და სერვისების წამყვანი მომწოდებელი საქართველოში",
            cta: "გაიგე მეტი"
        },
        about: {
            title: "ServisMT-ის შესახებ",
            subtitle: "ServisMT არის ლაზერული ჭრის, შედუღებისა და გრავირების დანადგარების სათადარიგო ნაწილებისა და სახარჯი მასალების წამყვანი მიმწოდებელი საქართველოში. ჩვენ გთავაზობთ CO2 და ბოჭკოვან ლაზერულ დანადგარებს, ლაზერებს გრავირებისა და მარკირებისთვის, ასევე ჰაერის ფილტრაციის სისტემებს ყველა ტიპის შედუღებისა და ლაზერული ჭრისთვის. ჩვენ გვაქვს სახარჯი მასალების ფართო ასორტიმენტი მისაღებ ფასებში, საწყობში დიდი მარაგებით."
        },
        products: {
            title: "ჩვენი პროდუქცია"
        },
         card1: {
            title: "ლაზერული საჭრელი დანადგარები",
            subtitle: "პროფესიონალური ლაზერული საჭრელი მოწყობილობები სხვადასხვა ინდუსტრიისთვის",
        subcard1: {
            title: "CO2 ლაზერული დანადგარები",
            subtitle: "მაღალი სიმძლავრის CO2 ლაზერული სისტემები სქელი მასალების საჭრელად",
        },
         subcard2: {
            title:"ბოჭკოვანი ლაზერული დანადგარები",
            subtitle:"ზუსტი ბოჭკოვანი ლაზერული სისტემები ლითონის დასამუშავებლად",
        },
         subcard3: {
            title: "საგრავირე დანადგარები",
            subtitle: "სპეციალიზებული მოწყობილობა დეტალური საგრავირე სამუშაოებისთვის",
        },
          subcard4: {
            title: "მარკირების დანადგარები",
            subtitle: "სამრეწველო მარკირებისა და კოდირების გადაწყვეტილებები",
        },
        },
         card2: {
            title:"სათადარიგო ნაწილები და კომპონენტები",
            subtitle: "ორიგინალი და თავსებადი ნაწილები ლაზერული მოწყობილობებისთვის",
        subcard1: {
            title: "ლაზერის თავები",
            subtitle: "საჭრელი თავები და ფოკუსირების სისტემები",
        },
         subcard2: {
            title:"სარკის სამაგრები",
            subtitle:"ოპტიკური კომპონენტები და სარკის კვანძები",
        },
         subcard3: {
            title: "მექანიკური ნაწილები",
            subtitle: "ძრავები, ამძრავები და მოძრაობის კომპონენტები",
        },
          subcard4: {
            title: "სახარჯი მასალები",
            subtitle: "საქშენები, ლინზები და სათადარიგო ნაწილები",
        },
        },
         card3: {
            title:"სავენტილაციო მოწყობილობები",
            subtitle: "ჰაერის ხარისხის გადაწყვეტილებები სამრეწველო გარემოსთვის",
        subcard1: {
            title: "ჰაერის ფილტრაციის სისტემები",
            subtitle: "მოწინავე ფილტრაცია სუფთა ჰაერისთვის",
        },
         subcard2: {
            title:"მტვრის შემგროვებელი სისტემები",
            subtitle:"მტვრისა და ნაწილაკების ეფექტური მოცილება",
        },
         subcard3: {
            title: "კვამლის გამწოვი დანადგარები",
            subtitle: "კვამლის მოცილება შედუღებისა და ჭრისთვის",
        },
          subcard4: {
            title: "სამრეწველო ვენტილატორები",
            subtitle: "მძლავრი სავენტილაციო ვენტილატორები",
        },
        },
        services: {
            title: "ჩვენი სერვისები"
        },
          servicesCard1: {
            title:"მოწყობილობების დიაგნოსტიკა",
            subtitle:"ლაზერული ჭრისა და გრავირების დანადგარების საკოორდინატო და ოპტიკური სისტემების დიაგნოსტიკა",
        },
        servicesCard2: {
            title:"სერვისული მომსახურება",
            subtitle:"ლაზერული ჭრისა და გრავირების დანადგარების საკოორდინატო და ოპტიკური სისტემების სერვისული მომსახურება",
        },
        servicesCard3: {
            title:"მოწყობილობების შეკეთება",
            subtitle:"ლაზერული ჭრისა და გრავირების დანადგარების საკოორდინატო და ოპტიკური სისტემების შეკეთება",
        },
        contact: {
            title: "დაგვიკავშირდით",
            subtitle: "ლაზერული საჭრელი მოწყობილობების, სათადარიგო ნაწილებისა და სერვისების წამყვანი მიმწოდებელი საქართველოში",
            form: {
                name: "სახელი",
                email: "ელ. ფოსტა",
                phone: "ტელეფონი",
                message: "შეტყობინება",
                submit: "გაგზავნა"
            }
        }
    }
};

class ServisMTApp {
    constructor() {
        this.currentLanguage = 'en';
        this.activeProductCard = null;
        this.init();
    }

    init() {
        this.setupLanguageSwitching();
        this.setupNavigation();
        this.setupProductCards();
        this.setupContactForm();
        this.setupScrollEffects();
        this.setupMobileMenu();
        this.setupIntersectionObserver();
        this.setupSmoothScrolling();
    }

    // Language switching functionality
    setupLanguageSwitching() {
        const langButtons = document.querySelectorAll('.lang-btn');
        
        langButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.getAttribute('data-lang');
                this.switchLanguage(lang);
                
                // Update active state
                langButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
    }

    switchLanguage(lang) {
        this.currentLanguage = lang;
        
        // Update all elements with data-translate attribute
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = this.getTranslation(key);
            if (translation) {
                element.textContent = translation;
            }
        });

        // Update placeholders
        document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
            const key = element.getAttribute('data-translate-placeholder');
            const translation = this.getTranslation(key);
            if (translation) {
                element.placeholder = translation;
            }
        });
    }

    getTranslation(key) {
        const keys = key.split('.');
        let value = translations[this.currentLanguage];
        
        for (const k of keys) {
            if (value && value[k]) {
                value = value[k];
            } else {
                return null;
            }
        }
        
        return value;
    }

    // Navigation functionality
    setupNavigation() {
        const navLinks = document.querySelectorAll('.nav-link');
        
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    const headerHeight = document.querySelector('.header').offsetHeight;
                    const targetPosition = targetElement.offsetTop - headerHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                }
            });
        });

        // Update active nav link on scroll
        window.addEventListener('scroll', () => {
            this.updateActiveNavLink();
        });
    }

    updateActiveNavLink() {
        const sections = document.querySelectorAll('section[id]');
        const headerHeight = document.querySelector('.header').offsetHeight;
        const scrollPos = window.scrollY + headerHeight + 100;

        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;
            const sectionId = section.getAttribute('id');

            if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${sectionId}`) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }

    // Product cards functionality
    setupProductCards() {
        const productCards = document.querySelectorAll('.product-card');
        
        productCards.forEach((card, index) => {
            const toggle = card.querySelector('.product-card__toggle');
            const subcategories = card.querySelector('.product-card__subcategories');
            
            toggle.addEventListener('click', () => {
                this.toggleProductCard(card, index);
            });
        });

        // Setup intersection observer for auto-closing
        this.setupProductCardObserver();
    }

    toggleProductCard(card, index) {
        const toggle = card.querySelector('.product-card__toggle');
        const subcategories = card.querySelector('.product-card__subcategories');
        const isExpanded = subcategories.classList.contains('expanded');

        // Close all other cards
        document.querySelectorAll('.product-card').forEach((otherCard, otherIndex) => {
            if (otherIndex !== index) {
                const otherToggle = otherCard.querySelector('.product-card__toggle');
                const otherSubcategories = otherCard.querySelector('.product-card__subcategories');
                
                otherToggle.classList.remove('expanded');
                otherSubcategories.classList.remove('expanded');
            }
        });

        // Toggle current card
        if (isExpanded) {
            toggle.classList.remove('expanded');
            subcategories.classList.remove('expanded');
            this.activeProductCard = null;
        } else {
            toggle.classList.add('expanded');
            subcategories.classList.add('expanded');
            this.activeProductCard = card;
        }
    }

    setupProductCardObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (!entry.isIntersecting && this.activeProductCard === entry.target) {
                    // Close the card if it goes out of view
                    const toggle = entry.target.querySelector('.product-card__toggle');
                    const subcategories = entry.target.querySelector('.product-card__subcategories');
                    
                    toggle.classList.remove('expanded');
                    subcategories.classList.remove('expanded');
                    this.activeProductCard = null;
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '-50px'
        });

        document.querySelectorAll('.product-card').forEach(card => {
            observer.observe(card);
        });
    }

    // Contact form functionality
    setupContactForm() {
        const form = document.getElementById('contactForm');
        
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleFormSubmission(form);
        });
    }

    handleFormSubmission(form) {
        const formData = new FormData(form);
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            phone: formData.get('phone'),
            message: formData.get('message')
        };

        // Basic validation
        if (!data.name || !data.email || !data.message) {
            this.showNotification('Please fill in all required fields', 'error');
            return;
        }

        if (!this.isValidEmail(data.email)) {
            this.showNotification('Please enter a valid email address', 'error');
            return;
        }

        // Show loading state
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        submitBtn.textContent = 'Sending...';
        submitBtn.disabled = true;

        // Simulate form submission with delay
        setTimeout(() => {
            this.showNotification('Message sent successfully! We will contact you soon.', 'success');
            form.reset();
            
            // Reset button
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
            
            // In a real application, you would send this data to your server
            console.log('Form data:', data);
        }, 1500);
    }

    isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    showNotification(message, type) {
        // Remove existing notifications
        document.querySelectorAll('.notification').forEach(notif => {
            notif.remove();
        });

        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification notification--${type}`;
        notification.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 18px;">
                    ${type === 'success' ? '✓' : '⚠'}
                </span>
                <span>${message}</span>
            </div>
        `;
        
        // Style the notification
        Object.assign(notification.style, {
            position: 'fixed',
            top: '20px',
            right: '20px',
            padding: '15px 20px',
            borderRadius: '10px',
            color: '#ffffff',
            fontWeight: '500',
            zIndex: '9999',
            transform: 'translateX(100%)',
            transition: 'transform 0.3s ease',
            backgroundColor: type === 'success' ? '#FF6B35' : '#dc3545',
            boxShadow: '0 10px 30px rgba(0, 0, 0, 0.3)',
            maxWidth: '350px',
            wordWrap: 'break-word'
        });

        document.body.appendChild(notification);

        // Animate in
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);

        // Remove after 5 seconds
        setTimeout(() => {
            if (notification.parentNode) {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }
        }, 5000);
    }

    // Scroll effects
    setupScrollEffects() {
        let lastScrollTop = 0;
        const header = document.querySelector('.header');

        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Header scroll effect
            if (scrollTop > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }

            lastScrollTop = scrollTop;
        });
    }

    // Mobile menu functionality
    setupMobileMenu() {
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const nav = document.getElementById('nav');
        let isMenuOpen = false;

        mobileMenuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            
            if (isMenuOpen) {
                this.openMobileMenu(nav, mobileMenuBtn);
            } else {
                this.closeMobileMenu(nav, mobileMenuBtn);
            }
        });

        // Close menu when clicking nav links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                if (isMenuOpen) {
                    this.closeMobileMenu(nav, mobileMenuBtn);
                    isMenuOpen = false;
                }
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (isMenuOpen && !nav.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                this.closeMobileMenu(nav, mobileMenuBtn);
                isMenuOpen = false;
            }
        });
    }

    openMobileMenu(nav, btn) {
        nav.style.display = 'flex';
        nav.style.position = 'fixed';
        nav.style.top = '80px';
        nav.style.left = '0';
        nav.style.right = '0';
        nav.style.background = 'rgba(10, 10, 10, 0.98)';
        nav.style.flexDirection = 'column';
        nav.style.padding = '2rem';
        nav.style.zIndex = '999';
        nav.style.backdropFilter = 'blur(10px)';
        nav.style.borderTop = '1px solid #333';
        
        // Animate hamburger
        const spans = btn.querySelectorAll('span');
        spans[0].style.transform = 'rotate(45deg) translate(6px, 6px)';
        spans[1].style.opacity = '0';
        spans[2].style.transform = 'rotate(-45deg) translate(6px, -6px)';
    }

    closeMobileMenu(nav, btn) {
        nav.style.display = '';
        nav.style.position = '';
        nav.style.top = '';
        nav.style.left = '';
        nav.style.right = '';
        nav.style.background = '';
        nav.style.flexDirection = '';
        nav.style.padding = '';
        nav.style.zIndex = '';
        nav.style.backdropFilter = '';
        nav.style.borderTop = '';
        
        // Reset hamburger
        const spans = btn.querySelectorAll('span');
        spans[0].style.transform = '';
        spans[1].style.opacity = '';
        spans[2].style.transform = '';
    }

    // Intersection Observer for animations
    setupIntersectionObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        // Observe elements for animation
        document.querySelectorAll('.service-card, .product-card, .about__content, .contact__content').forEach(el => {
            observer.observe(el);
        });
    }

    // Smooth scrolling for hero CTA
    setupSmoothScrolling() {
        const heroCta = document.querySelector('.hero__cta');
        
        heroCta.addEventListener('click', (e) => {
            e.preventDefault();
            const aboutSection = document.querySelector('#about');
            const headerHeight = document.querySelector('.header').offsetHeight;
            
            window.scrollTo({
                top: aboutSection.offsetTop - headerHeight,
                behavior: 'smooth'
            });
        });
    }
}

// Counter animation for stats
function animateCounters() {
    const counters = document.querySelectorAll('.stat__number');
    
    counters.forEach(counter => {
        const target = counter.textContent;
        const isNumber = !isNaN(target.replace(/[^0-9]/g, ''));
        
        if (isNumber) {
            const finalNumber = parseInt(target.replace(/[^0-9]/g, ''));
            const suffix = target.replace(/[0-9]/g, '');
            let currentNumber = 0;
            const increment = finalNumber / 100;
            
            const updateCounter = () => {
                if (currentNumber < finalNumber) {
                    currentNumber += increment;
                    counter.textContent = Math.floor(currentNumber) + suffix;
                    requestAnimationFrame(updateCounter);
                } else {
                    counter.textContent = target;
                }
            };
            
            updateCounter();
        }
    });
}

// Initialize app when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new ServisMTApp();
    
    // Setup stats counter animation
    const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounters();
                statsObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });
    
    const statsSection = document.querySelector('.about__stats');
    if (statsSection) {
        statsObserver.observe(statsSection);
    }
});

// Handle window resize
window.addEventListener('resize', () => {
    // Close mobile menu on resize to desktop
    if (window.innerWidth > 768) {
        const nav = document.getElementById('nav');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        
        if (nav && mobileMenuBtn) {
            nav.style.display = '';
            nav.style.position = '';
            nav.style.top = '';
            nav.style.left = '';
            nav.style.right = '';
            nav.style.background = '';
            nav.style.flexDirection = '';
            nav.style.padding = '';
            nav.style.zIndex = '';
            nav.style.backdropFilter = '';
            nav.style.borderTop = '';
            
            const spans = mobileMenuBtn.querySelectorAll('span');
            spans[0].style.transform = '';
            spans[1].style.opacity = '';
            spans[2].style.transform = '';
        }
    }
});

// Preloader (optional)
window.addEventListener('load', () => {
    document.body.classList.add('loaded');
});

// WhatsApp integration helper
function openWhatsApp(phone, message) {
    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = `https://wa.me/${phone.replace(/[^0-9]/g, '')}?text=${encodedMessage}`;
    window.open(whatsappUrl, '_blank');
}